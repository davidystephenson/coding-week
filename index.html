<h1 id='time'>10</h1>
<h2 id='money'>$0</h1>
<button id="red">Red</button>
<button id="black">Black</button>

<script>
  const time = document.getElementById('time')
  const money = document.getElementById('money')
  const red = document.getElementById('red')
  const black = document.getElementById('black')
  red.style.backgroundColor = 'red'
  black.style.backgroundColor = 'black'
  black.style.color = 'white'

  // const api = 'https://coding-week.onrender.com'
  const api = 'http://localhost:10000'
  const source = new EventSource(`${api}/source`)
  source.onmessage = function (event) {
    console.log('RECEIVED', event.data)
    const game = JSON.parse(event.data)
    time.innerText = game.time
    time.style.backgroundColor = game.color
    const textColor = game.color === 'red' ? 'black' : 'white'
    time.style.color = textColor
    money.innerText = `$${game.money}`
    if (game.bet === 'red') {
      red.style.fontSize = '20px'
      black.style.fontSize = '16px'
    } else {
      black.style.fontSize = '20px'
      red.style.fontSize = '16px'
    }
  }

  red.onclick = async function () {
    await fetch(`${api}/red`)
  }

  black.onclick = async function () {
    await fetch(`${api}/black`)
  }

  // source.addEventListener('message', e => {
  //   console.log('RECEIVED', e.data)
  // }, false)

  // source.addEventListener('open', function (e) {
  //   console.log('open')
  // }, false)

  // source.addEventListener('error', function (e) {
  //   console.log('error')
  // }, false)
</script>